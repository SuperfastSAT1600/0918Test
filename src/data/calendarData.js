// 2024-2025 학년도 SAT/AP 관련 일정 데이터 (한국시간 기준)
export const calendarEvents = [
  // SAT 시험일 (2024년 하반기) - 한국시간 기준
  { date: '2024-08-24T09:00:00+09:00', type: 'sat', title: 'SAT 시험', description: '8월 SAT 시험' },
  { date: '2024-10-05T09:00:00+09:00', type: 'sat', title: 'SAT 시험', description: '10월 SAT 시험' },
  { date: '2024-11-02T09:00:00+09:00', type: 'sat', title: 'SAT 시험', description: '11월 SAT 시험' },
  { date: '2024-12-07T09:00:00+09:00', type: 'sat', title: 'SAT 시험', description: '12월 SAT 시험' },
  
  // SAT 시험일 (2025년) - 한국시간 기준
  { date: '2025-03-08T09:00:00+09:00', type: 'sat', title: 'SAT 시험', description: '3월 SAT 시험' },
  { date: '2025-05-03T09:00:00+09:00', type: 'sat', title: 'SAT 시험', description: '5월 SAT 시험' },
  { date: '2025-06-07T09:00:00+09:00', type: 'sat', title: 'SAT 시험', description: '6월 SAT 시험' },
  { date: '2025-08-23T09:00:00+09:00', type: 'sat', title: 'SAT 시험', description: '8월 SAT 시험' },
  { date: '2025-09-13T09:00:00+09:00', type: 'sat', title: 'SAT 시험', description: '9월 SAT 시험' },
  { date: '2025-10-04T09:00:00+09:00', type: 'sat', title: 'SAT 시험', description: '10월 SAT 시험' },
  { date: '2025-11-08T09:00:00+09:00', type: 'sat', title: 'SAT 시험', description: '11월 SAT 시험' },
  { date: '2025-12-06T09:00:00+09:00', type: 'sat', title: 'SAT 시험', description: '12월 SAT 시험' },

  // SAT 시험일 (2026년) - 한국시간 기준
  { date: '2026-03-14T09:00:00+09:00', type: 'sat', title: 'SAT 시험', description: '3월 SAT 시험' },
  { date: '2026-05-02T09:00:00+09:00', type: 'sat', title: 'SAT 시험', description: '5월 SAT 시험' },
  { date: '2026-06-06T09:00:00+09:00', type: 'sat', title: 'SAT 시험', description: '6월 SAT 시험' },

  // AP 시험일 (2024년 5월) - 한국시간 기준
  { date: '2024-05-06T09:00:00+09:00', type: 'ap', title: 'AP 시험 시작', description: 'AP 시험 주간 1 시작 - AP Chemistry, AP Environmental Science' },
  { date: '2024-05-07T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP Psychology, AP Chinese Language and Culture, AP Seminar' },
  { date: '2024-05-08T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP English Literature and Composition, AP European History' },
  { date: '2024-05-09T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP United States Government and Politics, AP Chinese Language and Culture' },
  { date: '2024-05-10T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP United States History, AP Computer Science A' },
  { date: '2024-05-13T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP 시험 주간 2 시작 - AP Biology, AP Japanese Language and Culture' },
  { date: '2024-05-14T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP English Language and Composition, AP Spanish Literature and Culture' },
  { date: '2024-05-15T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP World History: Modern, AP French Language and Culture' },
  { date: '2024-05-16T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP Statistics, AP German Language and Culture' },
  { date: '2024-05-17T09:00:00+09:00', type: 'ap', title: 'AP 시험 종료', description: 'AP 시험 종료 - AP Art History, AP Music Theory' },

  // AP 시험일 (2025년 5월) - 한국시간 기준
  { date: '2025-05-05T09:00:00+09:00', type: 'ap', title: 'AP 시험 시작', description: 'AP 시험 주간 1 시작 - AP Chemistry, AP Environmental Science' },
  { date: '2025-05-06T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP Psychology, AP Chinese Language and Culture, AP Seminar' },
  { date: '2025-05-07T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP English Literature and Composition, AP European History' },
  { date: '2025-05-08T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP United States Government and Politics, AP Chinese Language and Culture' },
  { date: '2025-05-09T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP United States History, AP Computer Science A' },
  { date: '2025-05-12T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP 시험 주간 2 시작 - AP Biology, AP Japanese Language and Culture' },
  { date: '2025-05-13T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP English Language and Composition, AP Spanish Literature and Culture' },
  { date: '2025-05-14T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP World History: Modern, AP French Language and Culture' },
  { date: '2025-05-15T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP Statistics, AP German Language and Culture' },
  { date: '2025-05-16T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP 시험 종료 - AP Art History, AP Music Theory' },

  // AP 시험일 (2026년 5월) - 한국시간 기준
  { date: '2026-05-04T09:00:00+09:00', type: 'ap', title: 'AP 시험 시작', description: 'AP 시험 주간 1 시작 - AP Chemistry, AP Environmental Science' },
  { date: '2026-05-05T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP Psychology, AP Chinese Language and Culture, AP Seminar' },
  { date: '2026-05-06T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP English Literature and Composition, AP European History' },
  { date: '2026-05-07T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP United States Government and Politics, AP Chinese Language and Culture' },
  { date: '2026-05-08T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP United States History, AP Computer Science A' },
  { date: '2026-05-11T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP 시험 주간 2 시작 - AP Biology, AP Japanese Language and Culture' },
  { date: '2026-05-12T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP English Language and Composition, AP Spanish Literature and Culture' },
  { date: '2026-05-13T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP World History: Modern, AP French Language and Culture' },
  { date: '2026-05-14T09:00:00+09:00', type: 'ap', title: 'AP 시험', description: 'AP Statistics, AP German Language and Culture' },
  { date: '2026-05-15T09:00:00+09:00', type: 'ap', title: 'AP 시험 종료', description: 'AP 시험 종료 - AP Art History, AP Music Theory' },

  // SAT 성적 발표일 (2024년) - 한국시간 기준
  { date: '2024-09-06T09:00:00+09:00', type: 'score', title: 'SAT 성적 발표', description: '8월 SAT 성적 발표' },
  { date: '2024-10-18T09:00:00+09:00', type: 'score', title: 'SAT 성적 발표', description: '10월 SAT 성적 발표' },
  { date: '2024-11-15T09:00:00+09:00', type: 'score', title: 'SAT 성적 발표', description: '11월 SAT 성적 발표' },
  { date: '2024-12-20T09:00:00+09:00', type: 'score', title: 'SAT 성적 발표', description: '12월 SAT 성적 발표' },
  
  // SAT 성적 발표일 (2025년) - 한국시간 기준
  { date: '2025-03-21T09:00:00+09:00', type: 'score', title: 'SAT 성적 발표', description: '3월 SAT 성적 발표' },
  { date: '2025-05-16T09:00:00+09:00', type: 'score', title: 'SAT 성적 발표', description: '5월 SAT 성적 발표' },
  { date: '2025-06-20T09:00:00+09:00', type: 'score', title: 'SAT 성적 발표', description: '6월 SAT 성적 발표' },
  { date: '2025-09-05T09:00:00+09:00', type: 'score', title: 'SAT 성적 발표', description: '8월 SAT 성적 발표' },
  { date: '2025-09-27T09:00:00+09:00', type: 'score', title: 'SAT 성적 발표', description: '9월 SAT 성적 발표' },
  { date: '2025-10-17T09:00:00+09:00', type: 'score', title: 'SAT 성적 발표', description: '10월 SAT 성적 발표' },
  { date: '2025-11-21T09:00:00+09:00', type: 'score', title: 'SAT 성적 발표', description: '11월 SAT 성적 발표' },
  { date: '2025-12-19T09:00:00+09:00', type: 'score', title: 'SAT 성적 발표', description: '12월 SAT 성적 발표' },
  
  // AP 성적 발표일 - 한국시간 기준
  { date: '2024-07-08T09:00:00+09:00', type: 'score', title: 'AP 성적 발표', description: 'AP 시험 성적 발표' },
  { date: '2025-07-09T09:00:00+09:00', type: 'score', title: 'AP 성적 발표', description: 'AP 시험 성적 발표' },

  // SAT 성적 발표일 (2026년) - 한국시간 기준
  { date: '2026-03-28T09:00:00+09:00', type: 'score', title: 'SAT 성적 발표', description: '3월 SAT 성적 발표' },
  { date: '2026-05-16T09:00:00+09:00', type: 'score', title: 'SAT 성적 발표', description: '5월 SAT 성적 발표' },
  { date: '2026-06-20T09:00:00+09:00', type: 'score', title: 'SAT 성적 발표', description: '6월 SAT 성적 발표' },

  // AP 성적 발표일 (2026년) - 한국시간 기준
  { date: '2026-07-08T09:00:00+09:00', type: 'score', title: 'AP 성적 발표', description: 'AP 시험 성적 발표' },

  // 방학 기간 - 한국시간 기준
  { date: '2024-12-21T09:00:00+09:00', type: 'break', title: '겨울방학 시작', description: '겨울방학 시작' },
  { date: '2025-01-06T09:00:00+09:00', type: 'break', title: '겨울방학 종료', description: '겨울방학 종료' },
  { date: '2025-06-15T09:00:00+09:00', type: 'break', title: '여름방학 시작', description: '여름방학 시작' },
  { date: '2025-08-25T09:00:00+09:00', type: 'break', title: '여름방학 종료', description: '여름방학 종료' },
  { date: '2025-12-21T09:00:00+09:00', type: 'break', title: '겨울방학 시작', description: '겨울방학 시작' },
  { date: '2026-01-06T09:00:00+09:00', type: 'break', title: '겨울방학 종료', description: '겨울방학 종료' },
  { date: '2026-06-15T09:00:00+09:00', type: 'break', title: '여름방학 시작', description: '여름방학 시작' },
  { date: '2026-08-25T09:00:00+09:00', type: 'break', title: '여름방학 종료', description: '여름방학 종료' },

  // 대학 원서 접수일 (2024-2025년) - 한국시간 기준
  { date: '2024-11-01T09:00:00+09:00', type: 'application', title: 'Early Decision 마감', description: '하버드, 스탠포드, MIT, 듀크 등 ED 마감' },
  { date: '2024-11-15T09:00:00+09:00', type: 'application', title: 'Early Action 마감', description: '프린스턴, 예일, 시카고, 조지타운 등 EA 마감' },
  { date: '2025-01-01T09:00:00+09:00', type: 'application', title: 'Regular Decision 마감', description: '대부분 대학 RD 마감' },
  { date: '2025-01-15T09:00:00+09:00', type: 'application', title: 'UC 시스템 마감', description: 'UC 버클리, UCLA, UC 샌디에이고 등 마감' },
  { date: '2025-02-01T09:00:00+09:00', type: 'application', title: '일부 대학 추가 마감', description: '일부 주립대 및 사립대 추가 마감' },

  // 대학 합격 발표일 (2024-2025년) - 한국시간 기준
  { date: '2024-12-15T09:00:00+09:00', type: 'result', title: 'Early Decision 발표', description: 'ED 결과 발표 (하버드, 스탠포드, MIT 등)' },
  { date: '2025-01-31T09:00:00+09:00', type: 'result', title: 'Early Action 발표', description: 'EA 결과 발표 (프린스턴, 예일, 시카고 등)' },
  { date: '2025-03-15T09:00:00+09:00', type: 'result', title: 'Regular Decision 발표', description: 'RD 결과 발표 시작' },
  { date: '2025-03-28T09:00:00+09:00', type: 'result', title: 'Ivy League 발표', description: '하버드, 예일, 프린스턴, 브라운 등 발표' },
  { date: '2025-03-29T09:00:00+09:00', type: 'result', title: 'Ivy League 발표', description: '다트머스, 코넬, 펜실베니아 대학 발표' },
  { date: '2025-04-01T09:00:00+09:00', type: 'result', title: 'UC 시스템 발표', description: 'UC 버클리, UCLA, UC 샌디에이고 등 발표' },
  { date: '2025-04-15T09:00:00+09:00', type: 'result', title: '대부분 대학 발표', description: '대부분의 대학 합격 발표 완료' },
  { date: '2025-05-01T09:00:00+09:00', type: 'result', title: '최종 결정일', description: '대학 등록 마감일 (National Decision Day)' },

  // 대학 원서 접수일 (2025-2026년) - 한국시간 기준
  { date: '2025-11-01T09:00:00+09:00', type: 'application', title: 'Early Decision 마감', description: '하버드, 스탠포드, MIT, 듀크 등 ED 마감' },
  { date: '2025-11-15T09:00:00+09:00', type: 'application', title: 'Early Action 마감', description: '프린스턴, 예일, 시카고, 조지타운 등 EA 마감' },
  { date: '2026-01-01T09:00:00+09:00', type: 'application', title: 'Regular Decision 마감', description: '대부분 대학 RD 마감' },
  { date: '2026-01-15T09:00:00+09:00', type: 'application', title: 'UC 시스템 마감', description: 'UC 버클리, UCLA, UC 샌디에이고 등 마감' },
  { date: '2026-02-01T09:00:00+09:00', type: 'application', title: '일부 대학 추가 마감', description: '일부 주립대 및 사립대 추가 마감' },

  // 대학 합격 발표일 (2025-2026년) - 한국시간 기준
  { date: '2025-12-15T09:00:00+09:00', type: 'result', title: 'Early Decision 발표', description: 'ED 결과 발표 (하버드, 스탠포드, MIT 등)' },
  { date: '2026-01-31T09:00:00+09:00', type: 'result', title: 'Early Action 발표', description: 'EA 결과 발표 (프린스턴, 예일, 시카고 등)' },
  { date: '2026-03-15T09:00:00+09:00', type: 'result', title: 'Regular Decision 발표', description: 'RD 결과 발표 시작' },
  { date: '2026-03-28T09:00:00+09:00', type: 'result', title: 'Ivy League 발표', description: '하버드, 예일, 프린스턴, 브라운 등 발표' },
  { date: '2026-03-29T09:00:00+09:00', type: 'result', title: 'Ivy League 발표', description: '다트머스, 코넬, 펜실베니아 대학 발표' },
  { date: '2026-04-01T09:00:00+09:00', type: 'result', title: 'UC 시스템 발표', description: 'UC 버클리, UCLA, UC 샌디에이고 등 발표' },
  { date: '2026-04-15T09:00:00+09:00', type: 'result', title: '대부분 대학 발표', description: '대부분의 대학 합격 발표 완료' },
  { date: '2026-05-01T09:00:00+09:00', type: 'result', title: '최종 결정일', description: '대학 등록 마감일 (National Decision Day)' }
];

// SAT 전용 세일즈 액션 추천 로직
export const getSATSalesRecommendations = (currentDate) => {
  const today = new Date(currentDate);
  const recommendations = [];

  // SAT 관련 이벤트만 필터링
  const satEvents = calendarEvents.filter(event => event.type === 'sat' || event.type === 'score');
  
  // 오늘의 SAT 이벤트 찾기
  const todaySATEvents = satEvents.filter(event => {
    const eventDate = new Date(event.date);
    return eventDate.toDateString() === today.toDateString();
  });

  // 30일 이내의 SAT 이벤트 찾기
  const upcomingSATEvents = satEvents.filter(event => {
    const eventDate = new Date(event.date);
    const diffTime = eventDate - today;
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    return diffDays >= 0 && diffDays <= 30;
  });

  // 오늘의 SAT 이벤트에 따른 추천
  todaySATEvents.forEach(event => {
    if (event.type === 'sat') {
      recommendations.push({
        priority: 'high',
        title: 'SAT 시험일 - 긴급 연락',
        action: '시험 당일 학생들에게 격려 메시지 전송 및 부모님께 결과 기대 메시지',
        message: '오늘 SAT 시험 응시하시는 모든 학생들 화이팅! 평소 실력 발휘하시길 바랍니다. 결과는 약 2주 후에 나오니 그때까지 기다려주세요. 시험 후에는 컨디션 관리에 신경 쓰세요.',
        category: 'SAT',
        target: '시험 응시 학생 및 부모님'
      });
    } else if (event.type === 'score') {
      recommendations.push({
        priority: 'high',
        title: 'SAT 성적 발표일 - 결과 상담',
        action: '성적 발표 후 즉시 학생/부모님과 상담 일정 잡기',
        message: 'SAT 성적이 발표되었습니다! 결과에 따라 다음 단계 계획을 세워보겠습니다. 상담 예약을 잡아드릴까요?',
        category: 'SAT',
        target: '성적 확인 학생 및 부모님'
      });
    }
  });

  // 다가오는 SAT 이벤트에 따른 추천
  upcomingSATEvents.forEach(event => {
    const eventDate = new Date(event.date);
    const diffTime = eventDate - today;
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

    if (event.type === 'sat') {
      if (diffDays <= 1) {
        recommendations.push({
          priority: 'high',
          title: `SAT 시험 ${diffDays === 0 ? '내일' : '내일'} - 최종 점검`,
          action: '시험 전 마지막 점검 및 격려 메시지',
          message: `SAT 시험이 ${diffDays === 0 ? '내일' : '내일'}입니다! 오늘은 가벼운 복습만 하고 일찍 주무세요. 컨디션 관리가 가장 중요합니다.`,
          category: 'SAT',
          target: '시험 준비 학생'
        });
      } else if (diffDays <= 3) {
        recommendations.push({
          priority: 'medium',
          title: `SAT 시험 ${diffDays}일 전 - 최종 준비`,
          action: '시험 전 마지막 준비사항 안내 및 격려',
          message: `SAT 시험이 ${diffDays}일 남았습니다! 마지막으로 실전 연습과 컨디션 관리에 집중하세요.`,
          category: 'SAT',
          target: '시험 준비 학생'
        });
      } else if (diffDays <= 7) {
        recommendations.push({
          priority: 'low',
          title: `SAT 시험 ${diffDays}일 전 - 준비 체크`,
          action: '시험 준비 상황 점검 및 추가 지원 제안',
          message: `SAT 시험이 ${diffDays}일 남았습니다. 준비 상황은 어떤가요? 추가 도움이 필요하시면 연락주세요.`,
          category: 'SAT',
          target: '시험 준비 학생'
        });
      } else if (diffDays <= 14) {
        recommendations.push({
          priority: 'low',
          title: `SAT 시험 ${diffDays}일 전 - 중간 점검`,
          action: '시험 준비 중간 점검 및 추가 학습 계획 수립',
          message: `SAT 시험이 ${diffDays}일 남았습니다. 현재까지의 준비 상황을 점검하고 남은 기간 동안의 학습 계획을 세워보세요.`,
          category: 'SAT',
          target: '시험 준비 학생'
        });
      } else if (diffDays <= 30) {
        recommendations.push({
          priority: 'low',
          title: `SAT 시험 ${diffDays}일 전 - 장기 계획`,
          action: '시험 준비 장기 계획 수립 및 등록 확인',
          message: `SAT 시험이 ${diffDays}일 남았습니다. 체계적인 준비 계획을 세우고 시험 등록을 확인해보세요.`,
          category: 'SAT',
          target: '시험 준비 학생'
        });
      }
    } else if (event.type === 'score') {
      if (diffDays <= 2) {
        recommendations.push({
          priority: 'medium',
          title: `SAT 성적 발표 ${diffDays}일 전 - 상담 예약`,
          action: '성적 발표 후 상담 일정 미리 잡기',
          message: `SAT 성적 발표가 ${diffDays}일 남았습니다. 결과에 따른 상담을 미리 예약해두시는 것을 추천드립니다.`,
          category: 'SAT',
          target: '시험 응시 학생'
        });
      }
    }
  });

  return recommendations.sort((a, b) => {
    const priorityOrder = { high: 3, medium: 2, low: 1 };
    return priorityOrder[b.priority] - priorityOrder[a.priority];
  });
};

// AP 전용 세일즈 액션 추천 로직
export const getAPSalesRecommendations = (currentDate) => {
  const today = new Date(currentDate);
  const recommendations = [];

  // AP 관련 이벤트만 필터링
  const apEvents = calendarEvents.filter(event => event.type === 'ap' || event.type === 'score');
  
  // 오늘의 AP 이벤트 찾기
  const todayAPEvents = apEvents.filter(event => {
    const eventDate = new Date(event.date);
    return eventDate.toDateString() === today.toDateString();
  });

  // 60일 이내의 AP 이벤트 찾기
  const upcomingAPEvents = apEvents.filter(event => {
    const eventDate = new Date(event.date);
    const diffTime = eventDate - today;
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    return diffDays >= 0 && diffDays <= 60;
  });

  // 오늘의 AP 이벤트에 따른 추천
  todayAPEvents.forEach(event => {
    if (event.type === 'ap') {
      recommendations.push({
        priority: 'high',
        title: 'AP 시험일 - 지원 메시지',
        action: 'AP 시험 응시 학생들에게 시험 팁 및 격려 메시지',
        message: 'AP 시험 잘 보시길 바랍니다! 평소 연습한 대로 차근차근 풀어보세요. 어려운 문제는 넘어가고 확실한 것부터 해결하세요. 시간 관리도 중요합니다.',
        category: 'AP',
        target: '시험 응시 학생',
        subjects: event.description.split(' - ')[1] || event.description
      });
    } else if (event.type === 'score') {
      recommendations.push({
        priority: 'high',
        title: 'AP 성적 발표일 - 결과 상담',
        action: '성적 발표 후 즉시 학생/부모님과 상담 일정 잡기',
        message: 'AP 성적이 발표되었습니다! 결과에 따라 다음 단계 계획을 세워보겠습니다. 상담 예약을 잡아드릴까요?',
        category: 'AP',
        target: '성적 확인 학생 및 부모님'
      });
    }
  });

  // 다가오는 AP 이벤트에 따른 추천
  upcomingAPEvents.forEach(event => {
    const eventDate = new Date(event.date);
    const diffTime = eventDate - today;
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

    if (event.type === 'ap') {
      if (diffDays <= 1) {
        recommendations.push({
          priority: 'high',
          title: `AP 시험 ${diffDays === 0 ? '내일' : '내일'} - 최종 리뷰`,
          action: 'AP 시험 전 마지막 리뷰 및 시험 전략 안내',
          message: `AP 시험이 ${diffDays === 0 ? '내일' : '내일'}입니다! 핵심 개념을 다시 한번 정리하고 시험 전략을 점검해보세요.`,
          category: 'AP',
          target: '시험 준비 학생',
          subjects: event.description.split(' - ')[1] || event.description
        });
      } else if (diffDays <= 3) {
        recommendations.push({
          priority: 'medium',
          title: `AP 시험 ${diffDays}일 전 - 최종 리뷰`,
          action: 'AP 시험 전 마지막 리뷰 및 시험 전략 안내',
          message: `AP 시험이 ${diffDays}일 남았습니다! 핵심 개념을 다시 한번 정리하고 시험 전략을 점검해보세요.`,
          category: 'AP',
          target: '시험 준비 학생',
          subjects: event.description.split(' - ')[1] || event.description
        });
      } else if (diffDays <= 7) {
        recommendations.push({
          priority: 'medium',
          title: `AP 시험 ${diffDays}일 전 - 실전 연습`,
          action: 'AP 시험 실전 연습 및 약점 보완',
          message: `AP 시험이 ${diffDays}일 남았습니다! 실전 연습을 통해 약점을 보완하고 시험 감각을 익혀보세요.`,
          category: 'AP',
          target: '시험 준비 학생',
          subjects: event.description.split(' - ')[1] || event.description
        });
      } else if (diffDays <= 14) {
        recommendations.push({
          priority: 'low',
          title: `AP 시험 ${diffDays}일 전 - 중간 점검`,
          action: 'AP 시험 준비 중간 점검 및 추가 학습 계획',
          message: `AP 시험이 ${diffDays}일 남았습니다! 현재까지의 준비 상황을 점검하고 남은 기간 동안의 학습 계획을 세워보세요.`,
          category: 'AP',
          target: '시험 준비 학생',
          subjects: event.description.split(' - ')[1] || event.description
        });
      } else if (diffDays <= 30) {
        recommendations.push({
          priority: 'low',
          title: `AP 시험 ${diffDays}일 전 - 장기 계획`,
          action: 'AP 시험 준비 장기 계획 수립 및 과목별 전략',
          message: `AP 시험이 ${diffDays}일 남았습니다! 체계적인 준비 계획을 세우고 과목별 전략을 수립해보세요.`,
          category: 'AP',
          target: '시험 준비 학생',
          subjects: event.description.split(' - ')[1] || event.description
        });
      } else if (diffDays <= 60) {
        recommendations.push({
          priority: 'low',
          title: `AP 시험 ${diffDays}일 전 - 초기 준비`,
          action: 'AP 시험 초기 준비 및 기본기 다지기',
          message: `AP 시험이 ${diffDays}일 남았습니다! 기본기를 다지고 체계적인 준비를 시작해보세요.`,
          category: 'AP',
          target: '시험 준비 학생',
          subjects: event.description.split(' - ')[1] || event.description
        });
      }
    } else if (event.type === 'score') {
      if (diffDays <= 2) {
        recommendations.push({
          priority: 'medium',
          title: `AP 성적 발표 ${diffDays}일 전 - 상담 예약`,
          action: '성적 발표 후 상담 일정 미리 잡기',
          message: `AP 성적 발표가 ${diffDays}일 남았습니다. 결과에 따른 상담을 미리 예약해두시는 것을 추천드립니다.`,
          category: 'AP',
          target: '시험 응시 학생'
        });
      }
    }
  });

  return recommendations.sort((a, b) => {
    const priorityOrder = { high: 3, medium: 2, low: 1 };
    return priorityOrder[b.priority] - priorityOrder[a.priority];
  });
};

// 통합 세일즈 액션 추천 로직
export const getSalesRecommendations = (currentDate) => {
  const today = new Date(currentDate);
  const recommendations = [];

  // 오늘의 이벤트 찾기
  const todayEvents = calendarEvents.filter(event => {
    const eventDate = new Date(event.date);
    return eventDate.toDateString() === today.toDateString();
  });

  // 7일 이내의 이벤트 찾기
  const upcomingEvents = calendarEvents.filter(event => {
    const eventDate = new Date(event.date);
    const diffTime = eventDate - today;
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    return diffDays >= 0 && diffDays <= 7;
  });

  // 오늘의 이벤트에 따른 추천
  todayEvents.forEach(event => {
    switch (event.type) {
      case 'sat':
        recommendations.push({
          priority: 'high',
          title: 'SAT 시험일 - 긴급 연락',
          action: '시험 당일 학생들에게 격려 메시지 전송 및 부모님께 결과 기대 메시지',
          message: '오늘 SAT 시험 응시하시는 모든 학생들 화이팅! 평소 실력 발휘하시길 바랍니다. 결과는 약 2주 후에 나오니 그때까지 기다려주세요. 시험 후에는 컨디션 관리에 신경 쓰세요.'
        });
        break;
      case 'ap':
        recommendations.push({
          priority: 'high',
          title: 'AP 시험일 - 지원 메시지',
          action: 'AP 시험 응시 학생들에게 시험 팁 및 격려 메시지',
          message: 'AP 시험 잘 보시길 바랍니다! 평소 연습한 대로 차근차근 풀어보세요. 어려운 문제는 넘어가고 확실한 것부터 해결하세요. 시간 관리도 중요합니다.'
        });
        break;
      case 'score':
        recommendations.push({
          priority: 'high',
          title: '성적 발표일 - 결과 상담',
          action: '성적 발표 후 즉시 학생/부모님과 상담 일정 잡기',
          message: '성적이 발표되었습니다! 결과에 따라 다음 단계 계획을 세워보겠습니다. 상담 예약을 잡아드릴까요?'
        });
        break;
      case 'application':
        recommendations.push({
          priority: 'high',
          title: '원서 마감일 - 최종 점검',
          action: '원서 마감 전 마지막 점검 및 지원',
          message: '원서 마감이 다가왔습니다! 서류가 모두 준비되었는지 최종 점검해보세요. 추가 도움이 필요하시면 언제든 연락주세요.'
        });
        break;
      case 'result':
        recommendations.push({
          priority: 'high',
          title: '합격 발표일 - 축하 및 상담',
          action: '합격/불합격 결과에 따른 상담 및 다음 단계 안내',
          message: '대학 결과가 발표되었습니다! 합격을 축하드리거나, 불합격 시 대안을 함께 찾아보겠습니다.'
        });
        break;
    }
  });

  // 다가오는 이벤트에 따른 추천
  upcomingEvents.forEach(event => {
    const eventDate = new Date(event.date);
    const diffTime = eventDate - today;
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

    switch (event.type) {
      case 'sat':
        if (diffDays <= 1) {
          recommendations.push({
            priority: 'high',
            title: `SAT 시험 ${diffDays === 0 ? '내일' : '내일'} - 최종 점검`,
            action: '시험 전 마지막 점검 및 격려 메시지',
            message: `SAT 시험이 ${diffDays === 0 ? '내일' : '내일'}입니다! 오늘은 가벼운 복습만 하고 일찍 주무세요. 컨디션 관리가 가장 중요합니다.`
          });
        } else if (diffDays <= 3) {
          recommendations.push({
            priority: 'medium',
            title: `SAT 시험 ${diffDays}일 전 - 최종 준비`,
            action: '시험 전 마지막 준비사항 안내 및 격려',
            message: `SAT 시험이 ${diffDays}일 남았습니다! 마지막으로 실전 연습과 컨디션 관리에 집중하세요.`
          });
        } else if (diffDays <= 7) {
          recommendations.push({
            priority: 'low',
            title: `SAT 시험 ${diffDays}일 전 - 준비 체크`,
            action: '시험 준비 상황 점검 및 추가 지원 제안',
            message: `SAT 시험이 ${diffDays}일 남았습니다. 준비 상황은 어떤가요? 추가 도움이 필요하시면 연락주세요.`
          });
        }
        break;
      case 'ap':
        if (diffDays <= 3) {
          recommendations.push({
            priority: 'medium',
            title: `AP 시험 ${diffDays}일 전 - 최종 리뷰`,
            action: 'AP 시험 전 마지막 리뷰 및 시험 전략 안내',
            message: `AP 시험이 ${diffDays}일 남았습니다! 핵심 개념을 다시 한번 정리하고 시험 전략을 점검해보세요.`
          });
        }
        break;
      case 'score':
        if (diffDays <= 2) {
          recommendations.push({
            priority: 'medium',
            title: `성적 발표 ${diffDays}일 전 - 상담 예약`,
            action: '성적 발표 후 상담 일정 미리 잡기',
            message: `성적 발표가 ${diffDays}일 남았습니다. 결과에 따른 상담을 미리 예약해두시는 것을 추천드립니다.`
          });
        }
        break;
      case 'application':
        if (diffDays <= 3) {
          recommendations.push({
            priority: 'high',
            title: `원서 마감 ${diffDays}일 전 - 서류 점검`,
            action: '원서 마감 전 서류 최종 점검 및 제출 지원',
            message: `원서 마감이 ${diffDays}일 남았습니다! 서류가 모두 준비되었는지 다시 한번 확인해보세요.`
          });
        } else if (diffDays <= 7) {
          recommendations.push({
            priority: 'medium',
            title: `원서 마감 ${diffDays}일 전 - 준비 상황 점검`,
            action: '원서 준비 상황 점검 및 추가 지원 제안',
            message: `원서 마감이 ${diffDays}일 남았습니다. 준비 상황은 어떤가요?`
          });
        }
        break;
    }
  });

  // 일반적인 주간 추천
  if (recommendations.length === 0) {
    recommendations.push({
      priority: 'low',
      title: '주간 체크인',
      action: '학생/부모님과 정기적인 체크인 및 진행 상황 점검',
      message: '이번 주 학습 진행 상황은 어떤가요? 추가로 도움이 필요한 부분이 있으시면 언제든 연락주세요.'
    });
  }

  return recommendations.sort((a, b) => {
    const priorityOrder = { high: 3, medium: 2, low: 1 };
    return priorityOrder[b.priority] - priorityOrder[a.priority];
  });
};
